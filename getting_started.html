<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Getting Started &mdash; Saleae 0.0.1 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Launching the Logic 2 Software and Starting the Socket Interface" href="launching_logic2.html" />
    <link rel="prev" title="Saleae Logic 2 Automation Interface Documentation" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> Saleae
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#installing-the-python-automation-api-package">Installing the Python Automation API package</a></li>
<li class="toctree-l2"><a class="reference internal" href="#launching-logic2">Launching Logic2</a></li>
<li class="toctree-l2"><a class="reference internal" href="#using-the-python-automation-api">Using the Python Automation API</a></li>
<li class="toctree-l2"><a class="reference internal" href="#finding-the-serial-number-device-id-of-a-device">Finding the Serial Number (Device Id) of a Device</a></li>
<li class="toctree-l2"><a class="reference internal" href="#versioning">Versioning</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="launching_logic2.html">Launching the Logic 2 Software and Starting the Socket Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="automation.html">Automation API</a></li>
<li class="toctree-l1"><a class="reference internal" href="errors.html">Errors</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Saleae</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Getting Started</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/getting_started.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="getting-started">
<h1>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this heading"></a></h1>
<section id="installing-the-python-automation-api-package">
<h2>Installing the Python Automation API package<a class="headerlink" href="#installing-the-python-automation-api-package" title="Permalink to this heading"></a></h2>
<p>To get started, you will need the latest build of the Logic 2 Software (2.3.59+), the logic2-automation python package, and Python 3.8, 3.9, or 3.10.</p>
<p>First, let’s install the logic2-automation package. Download the package zip file, and install it like so:</p>
<p>Download the package: <a class="reference download internal" download="" href="_downloads/b7b928f05540d9a162879817c2b89ea3/logic2_automation-0.0.1-py3-none-any.whl"><code class="xref download docutils literal notranslate"><span class="pre">_static/logic2_automation-0.0.1-py3-none-any.whl</span></code></a></p>
<p>And install it via pip:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip install path/to/logic2_automation-0.0.1-py3-none-any.whl
</pre></div>
</div>
</section>
<section id="launching-logic2">
<h2>Launching Logic2<a class="headerlink" href="#launching-logic2" title="Permalink to this heading"></a></h2>
<p>Because this feature is pre-release, the automation functionality is not available in the software by default. To activate it, the software needs to be launched with an environment variable:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># cmd.exe</span>
<span class="nb">set</span> <span class="nv">ENABLE_AUTOMATION</span><span class="o">=</span><span class="m">1</span>
<span class="c1"># bash</span>
<span class="nb">export</span> <span class="nv">ENABLE_AUTOMATION</span><span class="o">=</span><span class="m">1</span>
<span class="c1"># powershell</span>
<span class="nv">$Env</span>:ENABLE_AUTOMATION<span class="o">=</span><span class="m">1</span>
</pre></div>
</div>
<p>With this flag set, the automation interface can now be enabled in the software UI. Open the preferences dialog from the main menu, and scroll to the bottom.</p>
<img alt="_images/server_ui.png" src="_images/server_ui.png" />
<p>When the checkbox is checked, the automation server will start running in the Logic 2 software on the default port, 10430.</p>
</section>
<section id="using-the-python-automation-api">
<h2>Using the Python Automation API<a class="headerlink" href="#using-the-python-automation-api" title="Permalink to this heading"></a></h2>
<p>Next, let’s run a simple example. You don’t need to have a device connected for this.
This example uses a demo device, if you would like to use a connected device follow the
steps <a class="reference internal" href="#device-serial-number"><span class="std std-ref">here</span></a>
to find your device’s serial number and replace the demo value in the example.</p>
<p>Create a new python file called <code class="code docutils literal notranslate"><span class="pre">saleae_example.py</span></code>, and paste in these contents:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">saleae</span> <span class="k">import</span> <span class="n">automation</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">os.path</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="k">import</span> <span class="n">datetime</span>

<span class="c1"># Connect to the running Logic 2 Application on port `10430`</span>
<span class="n">manager</span> <span class="o">=</span> <span class="n">automation</span><span class="o">.</span><span class="n">Manager</span><span class="p">(</span><span class="n">port</span><span class="o">=</span><span class="mi">10430</span><span class="p">)</span>

<span class="c1"># Configure the capturing device to record on digital channels 0, 1, 2, and 3,</span>
<span class="c1"># with a sampling rate of 10 MSa/s, and a logic level of 3.3V.</span>
<span class="n">device_configuration</span> <span class="o">=</span> <span class="n">automation</span><span class="o">.</span><span class="n">LogicDeviceConfiguration</span><span class="p">(</span>
    <span class="n">enabled_digital_channels</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
    <span class="n">digital_sample_rate</span><span class="o">=</span><span class="mi">10_000_000</span><span class="p">,</span>
    <span class="n">digital_threshold_volts</span><span class="o">=</span><span class="mf">3.3</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1"># Record 5 seconds of data before stopping the capture</span>
<span class="n">capture_configuration</span> <span class="o">=</span> <span class="n">automation</span><span class="o">.</span><span class="n">CaptureConfiguration</span><span class="p">(</span>
    <span class="n">capture_mode</span><span class="o">=</span><span class="n">automation</span><span class="o">.</span><span class="n">TimedCaptureMode</span><span class="p">(</span><span class="n">duration_seconds</span><span class="o">=</span><span class="mf">5.0</span><span class="p">)</span>
<span class="p">)</span>

<span class="c1"># Start a capture - the capture will be automatically closed when leaving the `with` block</span>
<span class="c1"># Note: We are using serial number &#39;F4241&#39; here, which is the serial number for</span>
<span class="c1">#       the Logic Pro 16 demo device. You will need to use your device&#39;s serial number</span>
<span class="c1">#       to use a real device. Please see the &quot;Finding the Serial Number of a Device&quot; section.</span>
<span class="k">with</span> <span class="n">manager</span><span class="o">.</span><span class="n">start_capture</span><span class="p">(</span><span class="n">device_serial_number</span><span class="o">=</span><span class="s1">&#39;F4241&#39;</span><span class="p">,</span>
                           <span class="n">device_configuration</span><span class="o">=</span><span class="n">device_configuration</span><span class="p">,</span>
                           <span class="n">capture_configuration</span><span class="o">=</span><span class="n">capture_configuration</span><span class="p">)</span> <span class="k">as</span> <span class="n">capture</span><span class="p">:</span>

    <span class="c1"># Wait until the capture has finished</span>
    <span class="c1"># This will take about 5 seconds because we are using a timed capture mode</span>
    <span class="n">capture</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>

    <span class="c1"># Add an analyzer to the capture</span>
    <span class="c1"># Note: The simulator output is not actual SPI data</span>
    <span class="n">spi_analyzer</span> <span class="o">=</span> <span class="n">capture</span><span class="o">.</span><span class="n">add_analyzer</span><span class="p">(</span><span class="s1">&#39;SPI&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">f</span><span class="s1">&#39;Test Analyzer&#39;</span><span class="p">,</span> <span class="n">settings</span><span class="o">=</span><span class="p">{</span>
        <span class="s1">&#39;MISO&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s1">&#39;Clock&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s1">&#39;Enable&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
        <span class="s1">&#39;Bits per Transfer&#39;</span><span class="p">:</span> <span class="s1">&#39;8 Bits per Transfer (Standard)&#39;</span>
    <span class="p">})</span>

    <span class="c1"># Store output in a timestamped directory</span>
    <span class="n">output_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">(),</span> <span class="n">f</span><span class="s1">&#39;output-{datetime.now().strftime(&quot;%Y-%m-</span><span class="si">%d</span><span class="s1">_%H-%M-%S&quot;)}&#39;</span><span class="p">)</span>
    <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">output_dir</span><span class="p">)</span>

    <span class="c1"># Export analyzer data to a CSV file</span>
    <span class="n">analyzer_export_filepath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">output_dir</span><span class="p">,</span> <span class="s1">&#39;spi_export.csv&#39;</span><span class="p">)</span>
    <span class="n">capture</span><span class="o">.</span><span class="n">export_data_table</span><span class="p">(</span>
        <span class="n">filepath</span><span class="o">=</span><span class="n">analyzer_export_filepath</span><span class="p">,</span>
        <span class="n">analyzers</span><span class="o">=</span><span class="p">[</span><span class="n">spi_analyzer</span><span class="p">],</span>
        <span class="n">radix</span><span class="o">=</span><span class="n">automation</span><span class="o">.</span><span class="n">RadixType</span><span class="o">.</span><span class="n">ASCII</span>
    <span class="p">)</span>

    <span class="c1"># Export raw digital data to a CSV file</span>
    <span class="n">capture</span><span class="o">.</span><span class="n">export_raw_data_csv</span><span class="p">(</span><span class="n">directory</span><span class="o">=</span><span class="n">output_dir</span><span class="p">,</span> <span class="n">digital_channels</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>

    <span class="c1"># Finally, save the capture to a file</span>
    <span class="n">capture_filepath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">output_dir</span><span class="p">,</span> <span class="s1">&#39;example_capture.sal&#39;</span><span class="p">)</span>
    <span class="n">capture</span><span class="o">.</span><span class="n">save_capture</span><span class="p">(</span><span class="n">filepath</span><span class="o">=</span><span class="n">capture_filepath</span><span class="p">)</span>

<span class="c1"># Close the connection</span>
<span class="n">manager</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<p>With the software is running, and the automation interface enabled (as shown above), run the script:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python saleae_example.py
</pre></div>
</div>
<p>There you have it! Take a look at the documentation for Manager and Capture to see how the functionality all works!</p>
<p>Also, for most automated applications, you won’t want to start the software manually. See <a class="reference internal" href="launching_logic2.html#launching-and-starting-socket"><span class="std std-ref">this section</span></a> for more information about different ways to launch the Logic software, including through this python library.</p>
</section>
<section id="finding-the-serial-number-device-id-of-a-device">
<span id="device-serial-number"></span><h2>Finding the Serial Number (Device Id) of a Device<a class="headerlink" href="#finding-the-serial-number-device-id-of-a-device" title="Permalink to this heading"></a></h2>
<p>To find the serial number of a connected device, open capture info sidebar and click the device dropdown in the top right:</p>
<img alt="_images/device_info.png" src="_images/device_info.png" />
<p>If the device you want the serial number for is not selected, select it. Then click “Device Info” - this will open a popup with information about your device, including its serial number.</p>
<img alt="_images/device_serial.png" src="_images/device_serial.png" />
<p>You can copy the serial number from here and use it in your Python script where a “device_id” is required.</p>
</section>
<section id="versioning">
<h2>Versioning<a class="headerlink" href="#versioning" title="Permalink to this heading"></a></h2>
<p>The <cite>saleae.proto</cite> file contains a version (<cite>major.minor.patch</cite>). It can be found in the file header, and also in the
<cite>ThisApiVersion</cite> enum.</p>
<p>When generating language bindings, you can get the version of the .proto that was used through the protobuf <cite>ThisApiVersion</cite> enum - <cite>THIS_API_VERSION_MAJOR</cite>, <cite>THIS_API_VERSION_MINOR</cite>, and <cite>THIS_API_VERSION_PATCH</cite>.</p>
<p>The version of the .proto file that the server is using can be retrieved using the <cite>GetAppInfo</cite> gRPC method, or the <cite>Manager.get_app_info()</cite> call in the Python API.</p>
<blockquote>
<div><ul class="simple">
<li><p>For a given major version, the API strives to be forward and backwards compatible.</p></li>
<li><p>The major version will change when:
* There are any breaking changes.</p></li>
<li><p>The minor version will change when:
* New features are added
* Additions are made to the existing API</p></li>
<li><p>The patch version will change when:
* There are fixes to the API</p></li>
</ul>
</div></blockquote>
<p>When implementing a client that uses the API, it is recommended to always retrieve the api version via GetAppInfo to validate that the major version is the same, and that the minor version is not older than the client.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Saleae Logic 2 Automation Interface Documentation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="launching_logic2.html" class="btn btn-neutral float-right" title="Launching the Logic 2 Software and Starting the Socket Interface" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Saleae Inc.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>